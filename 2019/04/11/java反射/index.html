<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="java反射"><meta name="keywords" content="java,JDK源码"><meta name="author" content="gentlezuo"><meta name="copyright" content="gentlezuo"><title>java反射 | gentlezuo的博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#java反射"><span class="toc-number">1.</span> <span class="toc-text">java反射</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Class类"><span class="toc-number">1.1.</span> <span class="toc-text">Class类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取Class对象的方法"><span class="toc-number">1.1.1.</span> <span class="toc-text">获取Class对象的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Class类的常用的方法"><span class="toc-number">1.1.2.</span> <span class="toc-text">Class类的常用的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Constructor类"><span class="toc-number">1.2.</span> <span class="toc-text">Constructor类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用方法"><span class="toc-number">1.2.1.</span> <span class="toc-text">常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Field类"><span class="toc-number">1.3.</span> <span class="toc-text">Field类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用方法-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Method类"><span class="toc-number">1.4.</span> <span class="toc-text">Method类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用方法-2"><span class="toc-number">1.4.1.</span> <span class="toc-text">常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件-反射"><span class="toc-number">1.5.</span> <span class="toc-text">配置文件+反射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工具类Modifier"><span class="toc-number">1.6.</span> <span class="toc-text">工具类Modifier</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用方法-3"><span class="toc-number">1.6.1.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一些常量"><span class="toc-number">1.6.2.</span> <span class="toc-text">一些常量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缺点"><span class="toc-number">1.7.</span> <span class="toc-text">缺点</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s2.ax1x.com/2019/03/29/A0hzi6.jpg"></div><div class="author-info__name text-center">gentlezuo</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/gentlezuo">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">57</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">22</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">13</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2019/03/29/ABlpl9.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">gentlezuo的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">java反射</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-11</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/java/">java</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">3k</span><span class="post-meta__separator">|</span><span>阅读时长: 11 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="java反射"><a href="#java反射" class="headerlink" title="java反射"></a>java反射</h1><p>定义：JAVA反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。</p>
<a id="more"></a>
<p>反射多使用在框架中，控制反转，动态代理都需要使用到反射。</p>
<p>使用反射有一个前提：<strong>得到对应字节码的Class对象</strong>。因为要获取一个类的信息，就得通过Class对象。</p>
<p>反射就是把java类中的各种成分映射成一个个的Java对象<br>例如：一个类有：成员变量、方法、构造方法、包等等信息，利用反射技术可以对一个类进行解剖，把各个组成部分映射成一个个对象。</p>
<h2 id="Class类"><a href="#Class类" class="headerlink" title="Class类"></a>Class类</h2><p>Class对象表示正在运行的程序中已经加载的类或者接口。jvm中有很多个Class对象，每一个类（包括八种基本类型）都有一个Class对象。Class对象是由jvm在类加载的时候创建的，所以没有构造方法，也不需要我们去构造。</p>
<p>通过Class对象可以获取某个类中的：构造方法、成员变量、成员方法；并访问成员；</p>
<h3 id="获取Class对象的方法"><a href="#获取Class对象的方法" class="headerlink" title="获取Class对象的方法"></a>获取Class对象的方法</h3><p>三种方式：   </p>
<ul>
<li>类名.class</li>
<li>Object.getClass()</li>
<li>Class的静态方法：Class.forName(String className)<br>通常使用第三种方式，可以和配置文件配合使用，更加方便    </li>
</ul>
<p>以String类举例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种方法</span></span><br><span class="line">Class clz=String.class;</span><br><span class="line">String s=<span class="string">"adfgag"</span>;</span><br><span class="line"><span class="comment">//第二种方法</span></span><br><span class="line">Class clz1=s.getClass();</span><br><span class="line"><span class="comment">//第三种方法</span></span><br><span class="line">Class clz2=Class.forName(<span class="string">"java.lang.String"</span>);</span><br><span class="line">System.out.println(clz);</span><br><span class="line">System.out.println(clz1);</span><br><span class="line">System.out.println(clz2);</span><br><span class="line"><span class="comment">//一个类只有一个Class对象</span></span><br><span class="line">System.out.println(clz==clz2);</span><br><span class="line">System.out.println(clz1==clz2);</span><br></pre></td></tr></table></figure></p>
<p>输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class java.lang.String</span><br><span class="line">class java.lang.String</span><br><span class="line">class java.lang.String</span><br><span class="line">true</span><br><span class="line">true</span><br></pre></td></tr></table></figure></p>
<h3 id="Class类的常用的方法"><a href="#Class类的常用的方法" class="headerlink" title="Class类的常用的方法"></a>Class类的常用的方法</h3><ul>
<li>静态方法：forName(String className):返回与带有给定字符串名的类或接口相关联的 Class 对象。</li>
<li>静态方法：forName(String name, boolean initialize, ClassLoader loader):使用给定的类加载器，返回与带有给定字符串名的类或接口相关联的 Class 对象。initialize为true时会进行初始化。</li>
<li>newInstance() 创建此 Class 对象所表示的类的一个新实例。</li>
<li>getClassLoader() 返回该类的类加载器。</li>
<li>getConstructor(Class&lt;?&gt;… parameterTypes) 返回一个 Constructor 对象，它返回此 Class 对象所表示的类的指定<strong>公共</strong>构造方法。</li>
<li>getConstructors() 返回一个包含某些 Constructor 对象的数组，这些对象反映此 Class 对象所表示的类的所有公共构造方法。</li>
<li>getDeclaredConstructors() 返回 Constructor 对象的一个数组，这些对象反映此 Class 对象表示的类声明的<strong>所有</strong>构造方法。</li>
<li>getDeclaredField(String name) 返回一个 Field 对象，该对象反映此 Class 对象所表示的类或接口的指定已声明字段。</li>
<li>getDeclaredFields() 返回 Field 对象的一个数组，这些对象反映此 Class 对象所表示的类或接口所声明的所有字段。</li>
<li>getDeclaredMethods() 返回 Method 对象的一个数组，这些对象反映此 Class 对象表示的类或接口声明的所有方法，包括公共、保护、默认（包）访问和私有方法，但不包括继承的方法。</li>
<li>getField(String name) 返回一个 Field 对象，它反映此 Class 对象所表示的类或接口的指定公共成员字段。</li>
<li>getFields() 返回一个包含某些 Field 对象的数组，这些对象反映此 Class 对象所表示的类或接口的所有可访问公共字段。</li>
<li>getInterfaces() 确定此对象所表示的类或接口实现的接口。</li>
<li>getMethods() 返回一个包含某些 Method 对象的数组，这些对象反映此 Class 对象所表示的类或接口（包括那些由该类或接口声明的以及从超类和超接口继承的那些的类或接口）的公共 member 方法。</li>
<li>getName() 以 String 的形式返回此 Class 对象所表示的实体（类、接口、数组类、基本类型或 void）名称。</li>
<li>getResource(String name) 查找带有给定名称的资源。</li>
</ul>
<p><strong>注意</strong>：带有Declared的会返回所有权限修饰符修饰的，而不带Declared的只返回被public修饰的。</p>
<p>代码示例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Class clz=String.class;</span><br><span class="line">Object obj=clz.newInstance();</span><br><span class="line">System.out.println(obj.getClass().getName());<span class="comment">//java.lang.String</span></span><br><span class="line">Constructor constructor=clz.getConstructor(String.class);</span><br><span class="line">Constructor[] constructors=clz.getConstructors();</span><br><span class="line">Field field=clz.getDeclaredField(<span class="string">"value"</span>);</span><br><span class="line">System.out.println(field.toString());<span class="comment">//private final char[] java.lang.String.value</span></span><br><span class="line">Method[] methods=clz.getDeclaredMethods();</span><br><span class="line"><span class="keyword">for</span> (Method m:methods)&#123;</span><br><span class="line">    System.out.println(m.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java.lang.String</span><br><span class="line">private final char[] java.lang.String.value</span><br><span class="line">public boolean java.lang.String.equals(java.lang.Object)</span><br><span class="line">public java.lang.String java.lang.String.toString()</span><br><span class="line">public int java.lang.String.hashCode()</span><br><span class="line">public int java.lang.String.compareTo(java.lang.Object)</span><br><span class="line">public int java.lang.String.compareTo(java.lang.String)</span><br><span class="line">public int java.lang.String.indexOf(java.lang.String,int)</span><br><span class="line">static int java.lang.String.indexOf(char[],int,int,java.lang.String,int)</span><br><span class="line">static int java.lang.String.indexOf(char[],int,int,char[],int,int,int)</span><br><span class="line">public int java.lang.String.indexOf(int)</span><br><span class="line">public int java.lang.String.indexOf(java.lang.String)</span><br><span class="line">public int java.lang.String.indexOf(int,int)</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h2 id="Constructor类"><a href="#Constructor类" class="headerlink" title="Constructor类"></a>Constructor类</h2><p>Constructor 提供关于类的单个构造方法的信息以及对它的访问权限。</p>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li>newInstance(Object… initargs) 使用此 Constructor 对象表示的构造方法来创建该构造方法的声明类的新实例，并用指定的初始化参数初始化该实例。</li>
</ul>
<p>代码示例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object obj2=constructor.newInstance(<span class="string">"dfadfa"</span>);</span><br><span class="line">System.out.println(obj2);</span><br></pre></td></tr></table></figure></p>
<p>输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dfadfa</span><br></pre></td></tr></table></figure></p>
<h2 id="Field类"><a href="#Field类" class="headerlink" title="Field类"></a>Field类</h2><p>Field 提供有关类或接口的单个字段的信息，以及对它的动态访问权限。反射的字段可能是一个类（静态）字段或实例字段。</p>
<p>Array 允许在执行 get 或 set 访问操作期间进行扩展转换。</p>
<h3 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h3><p>当获取到field对象时，可以使用以下方法来访问和设置字段</p>
<ul>
<li>setAccessible(boolean flag)，这是父类的方法，设置是否有权限访问非共有的字段，以下方法都只能对公有字段操作除非使用次方法。</li>
<li>get(Object obj) 返回指定对象上此 Field 表示的字段的值。</li>
<li>getDouble(Object obj) 获取 double 类型或另一个通过扩展转换可以转换为 double 类型的基本类型的静态或实例字段的值。当然还可以获取Int，Float等等</li>
<li>getType() 返回一个 Class 对象，它标识了此 Field 对象所表示字段的声明类型。</li>
<li>set(Object obj, Object value) 将指定对象变量上此 Field 对象表示的字段设置为指定的新值。</li>
<li>setBoolean(Object obj, boolean z) 将字段的值设置为指定对象上的一个 boolean 值。当然也有其他基本类型的包装类。</li>
<li>getModifiers() 以整数形式返回由此 Field 对象表示的字段的 Java 语言修饰符。<br>例子：</li>
</ul>
<p>一个类：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> sex;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> moeny;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span><span class="params">(<span class="keyword">int</span> age, String name, <span class="keyword">boolean</span> sex, <span class="keyword">double</span> moeny)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">        <span class="keyword">this</span>.moeny = moeny;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果直接访问私有字段<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class clz=Class.forName(<span class="string">"javaKnowledge.People"</span>);</span><br><span class="line">People p=<span class="keyword">new</span> People(<span class="number">18</span>,<span class="string">"zzz"</span>,<span class="keyword">true</span>,<span class="number">10000.0</span>d);</span><br><span class="line"><span class="comment">//name是私有字段</span></span><br><span class="line">Field field1=clz.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">String name= (String) field1.get(p);</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalAccessException: Class javaKnowledge.ReflectDemo can not access a member of class javaKnowledge.People with modifiers &quot;private&quot;</span><br></pre></td></tr></table></figure></p>
<p>调用setAccessible(true)方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Class clz=Class.forName(<span class="string">"javaKnowledge.People"</span>);</span><br><span class="line">        <span class="comment">//获取age字段</span></span><br><span class="line">        Field field=clz.getField(<span class="string">"age"</span>);</span><br><span class="line">        People p=<span class="keyword">new</span> People(<span class="number">18</span>,<span class="string">"zzz"</span>,<span class="keyword">true</span>,<span class="number">10000.0</span>d);</span><br><span class="line">        <span class="keyword">int</span> a= (<span class="keyword">int</span>) field.get(p);</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        Field field1=clz.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        <span class="comment">//设置访问权限</span></span><br><span class="line">        field1.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        String name= (String) field1.get(p);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="comment">//设置p对象name字段的值为“hhh”</span></span><br><span class="line">        field1.set(p,<span class="string">"hhh"</span>);</span><br><span class="line">        <span class="comment">//验证结果</span></span><br><span class="line">        System.out.println(p.getName());</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">18</span><br><span class="line">zzz</span><br><span class="line">hhh</span><br></pre></td></tr></table></figure></p>
<p>此时已经可以获取一个类的字段信息，构造器信息，以及构造一个对象，设置字段的值。</p>
<h2 id="Method类"><a href="#Method类" class="headerlink" title="Method类"></a>Method类</h2><p>Method 提供关于类或接口上单独某个方法（以及如何访问该方法）的信息。所反映的方法可能是类方法或实例方法（包括抽象方法）。</p>
<p>Method 允许在匹配要调用的实参与底层方法的形参时进行扩展转换.</p>
<h3 id="常用方法-2"><a href="#常用方法-2" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li>invoke(Object obj, Object… args) 对带有指定参数的指定对象调用由此 Method 对象表示的底层方法。</li>
<li>getDeclaringClass() 返回表示声明由此 Method 对象表示的方法的类或接口的 Class 对象。</li>
<li>getParameterTypes() 按照声明顺序返回 Class 对象的数组，这些对象描述了此 Method 对象所表示的方法的形参类型。</li>
<li>getReturnType() 返回一个 Class 对象，该对象描述了此 Method 对象所表示的方法的正式返回类型。</li>
</ul>
<p>代码示例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Method[] methods=clz.getMethods();</span><br><span class="line"><span class="keyword">for</span> (Method m:methods)&#123;</span><br><span class="line">    System.out.println(<span class="string">"方法名："</span>+m.getName()+<span class="string">"      所属类："</span>+m.getDeclaringClass()+<span class="string">"      参数类型："</span>+Arrays.toString(m.getParameterTypes())+<span class="string">"      返回类型"</span>+m.getReturnType());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Method method=clz.getMethod(<span class="string">"say"</span>,String.class);</span><br><span class="line">method.invoke(p,<span class="string">"hello "</span>);</span><br><span class="line">Method method1=clz.getDeclaredMethod(<span class="string">"eat"</span>,Integer.class);</span><br><span class="line">System.out.println(method1.toString());</span><br><span class="line">method1.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">System.out.println(method1.invoke(p,<span class="number">9</span>));</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">方法名：getAge      所属类：class javaKnowledge.People      参数类型：[]      返回类型int</span><br><span class="line">方法名：setAge      所属类：class javaKnowledge.People      参数类型：[int]      返回类型void</span><br><span class="line">方法名：isSex      所属类：class javaKnowledge.People      参数类型：[]      返回类型boolean</span><br><span class="line">方法名：setSex      所属类：class javaKnowledge.People      参数类型：[boolean]      返回类型void</span><br><span class="line">方法名：getMoeny      所属类：class javaKnowledge.People      参数类型：[]      返回类型double</span><br><span class="line">方法名：setMoeny      所属类：class javaKnowledge.People      参数类型：[double]      返回类型void</span><br><span class="line">方法名：say      所属类：class javaKnowledge.People      参数类型：[class java.lang.String]      返回类型void</span><br><span class="line">方法名：getName      所属类：class javaKnowledge.People      参数类型：[]      返回类型class java.lang.String</span><br><span class="line">方法名：setName      所属类：class javaKnowledge.People      参数类型：[class java.lang.String]      返回类型void</span><br><span class="line">方法名：wait      所属类：class java.lang.Object      参数类型：[long, int]      返回类型void</span><br><span class="line">方法名：wait      所属类：class java.lang.Object      参数类型：[long]      返回类型void</span><br><span class="line">方法名：wait      所属类：class java.lang.Object      参数类型：[]      返回类型void</span><br><span class="line">方法名：equals      所属类：class java.lang.Object      参数类型：[class java.lang.Object]      返回类型boolean</span><br><span class="line">方法名：toString      所属类：class java.lang.Object      参数类型：[]      返回类型class java.lang.String</span><br><span class="line">方法名：hashCode      所属类：class java.lang.Object      参数类型：[]      返回类型int</span><br><span class="line">方法名：getClass      所属类：class java.lang.Object      参数类型：[]      返回类型class java.lang.Class</span><br><span class="line">方法名：notify      所属类：class java.lang.Object      参数类型：[]      返回类型void</span><br><span class="line">方法名：notifyAll      所属类：class java.lang.Object      参数类型：[]      返回类型void</span><br><span class="line">hello </span><br><span class="line">private java.lang.String javaKnowledge.People.eat(java.lang.Integer)</span><br><span class="line">eat 9</span><br></pre></td></tr></table></figure></p>
<h2 id="配置文件-反射"><a href="#配置文件-反射" class="headerlink" title="配置文件+反射"></a>配置文件+反射</h2><p>通常在框架中使用配置文件+反射</p>
<p>代码示例<br>在a.properties文件中写入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">age=19</span><br><span class="line">name=tom</span><br><span class="line">sex=false</span><br><span class="line">money=10000.0</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用配置类</span></span><br><span class="line">Properties properties=<span class="keyword">new</span> Properties();</span><br><span class="line"></span><br><span class="line">FileReader in = <span class="keyword">new</span> FileReader(<span class="string">"src/javaKnowledge/a.properties"</span>);</span><br><span class="line">properties.load(in);</span><br><span class="line">Constructor constructor=clz.getConstructor(<span class="keyword">int</span>.class,String.class,<span class="keyword">boolean</span>.class,<span class="keyword">double</span>.class);</span><br><span class="line">People people= (People) constructor.newInstance(Integer.parseInt(properties.getProperty(<span class="string">"age"</span>)),properties.getProperty(<span class="string">"name"</span>),Boolean.parseBoolean(properties.getProperty(<span class="string">"sex"</span>)),Double.parseDouble(properties.getProperty(<span class="string">"money"</span>)));</span><br><span class="line">System.out.println(people.getName());</span><br></pre></td></tr></table></figure>
<h2 id="工具类Modifier"><a href="#工具类Modifier" class="headerlink" title="工具类Modifier"></a>工具类Modifier</h2><p>Modifier 类提供了 static 方法和常量，对类和成员访问修饰符进行解码。修饰符集被表示为整数，用不同的位位置 (bit position) 表示不同的修饰符。  </p>
<h3 id="常用方法-3"><a href="#常用方法-3" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li>isAbstract(int mod) 如果整数参数包括 abstract 修饰符，则返回 true，否则返回 false。</li>
<li>isInterface(int mod) 如果整数参数包括 interface 修饰符，则返回 true，否则返回 false。</li>
<li>isPublic(int mod) 如果整数参数包括 public 修饰符，则返回 true，否则返回 false。</li>
<li>等等</li>
</ul>
<h3 id="一些常量"><a href="#一些常量" class="headerlink" title="一些常量"></a>一些常量</h3><ul>
<li>public static final int PUBLIC：表示public修饰的int值。</li>
<li>static int    FINAL ：表示 final 修饰符的 int 值。</li>
<li>等等</li>
</ul>
<p>代码示例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=clz.getModifiers();</span><br><span class="line">System.out.println(a);</span><br><span class="line">System.out.println(field.getModifiers());</span><br><span class="line">field=clz.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">System.out.println(field.getModifiers());</span><br><span class="line">field=clz.getDeclaredField(<span class="string">"sex"</span>);</span><br><span class="line">System.out.println(field.getModifiers());</span><br><span class="line"><span class="comment">//在People中添加一条语句 public static final int test=1;</span></span><br><span class="line">field=clz.getDeclaredField(<span class="string">"test"</span>);</span><br><span class="line">System.out.println(field.getModifiers());</span><br><span class="line">System.out.println(Modifier.classModifiers());</span><br><span class="line">System.out.println(field.getModifiers());</span><br><span class="line">System.out.println(Modifier.isPrivate(field.getModifiers()));</span><br></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">25</span><br><span class="line">3103</span><br><span class="line">25</span><br><span class="line">false</span><br></pre></td></tr></table></figure></p>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><p>虽然反射很优秀，特别是使用配置文件构造对象，执行方法，用于AOP和IOC等。但是在使用反射时需要注意：</p>
<ul>
<li>效率问题，反射比直接new()会慢一些，1-2倍时间</li>
<li>安全问题，反射可以暴力获得本不应该获得的权限，破坏了封闭性和安全性</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">gentlezuo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://gentlezuo.github.io/2019/04/11/java反射/">http://gentlezuo.github.io/2019/04/11/java反射/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://gentlezuo.github.io">gentlezuo的博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/JDK源码/">JDK源码</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/04/13/java注解-Annotation/"><i class="fa fa-chevron-left">  </i><span>java注解-Annotation</span></a></div><div class="next-post pull-right"><a href="/2019/04/07/策略模式/"><span>策略模式</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://s2.ax1x.com/2019/03/29/ABlpl9.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 By gentlezuo</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>